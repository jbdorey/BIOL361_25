<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>BIOL361 Prac 2 — GIS in R • BIOL361</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="BIOL361 Prac 2 — GIS in R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BIOL361</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Go to package home"><span class="fa fa-home"></span></a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Available pages"><span class="fa fas fa-book"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Ornithoptera_richmondia.html">Birdwing map</a></li>
    <li><a class="dropdown-item" href="../articles/Prac1_BIOL361.html">Prac 1 — R and tidyverse basics</a></li>
    <li><a class="dropdown-item" href="../articles/Prac2_BIOL361.html">Prac 2 — GIS in R</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>BIOL361 Prac 2 — GIS in R</h1>
                        <h4 data-toc-skip class="author">Dr James B
Dorey, University of Wollongong</h4>
            
            <h4 data-toc-skip class="date">Version 2025-02-25; practical
2025-03-31</h4>
      

      <div class="d-none name"><code>Prac2_BIOL361.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      Today we will go through some geographical information system
      (GIS) code and analyses in <strong>R</strong>. This will involve
      (1) learning some GIS data basics, (2) reading in and plot GIS
      data, and (3) running some simple analyses.
    </div>
    
<div class="section level2" number="1">
<h2 id="gis-data-basics">
<span class="header-section-number">1</span> GIS data basics<a class="anchor" aria-label="anchor" href="#gis-data-basics"></a>
</h2>
<p>People are often quite intimidated by working with any data, let
alone specialised datasets and formats! Even <strong>Excell</strong>
data formats can be scary if you’re so inclined. So, I’ll try to dispell
some of your fears in this section as even “complex” data can be
demistified. Much of the data that we are going to be using isn’t
<em>actually</em> complex!</p>
<div class="section level3" number="1.1">
<h3 id="raster-and-vector-data">
<span class="header-section-number">1.1</span> Raster and vector
data<a class="anchor" aria-label="anchor" href="#raster-and-vector-data"></a>
</h3>
<p>Alright, so I know that I said our data weren’t complex and then I
threw two random and scary-sounding words at you. Well, don’t stress
I’ll break it down and also point out that <em>raster</em> and
<em>vector</em> data are also regularly used by most of us on a daily
basis! In the shortest terms possible… <em>raster</em> data are
matrices/tables of data and vector data are simply points and lines.</p>
<div class="section level4" number="1.1.1">
<h4 id="raster-data-matrices-or-tables">
<span class="header-section-number">1.1.1</span> Raster data
(matrices or tables)<a class="anchor" aria-label="anchor" href="#raster-data-matrices-or-tables"></a>
</h4>
<p>One of the most-commonly known raster file formats would be the
<em>.jpg</em> format. But, many others are commonly used, such as
<em>.tiff</em>, <em>.png</em>, and <em>.gif</em>. You might be wondering
“How on Earth is that a matrix or table??”. And loo, fair enough. But
take a look at the below dplyr logo. This is a <em>.png</em> file, and
if we zoom in, we can start to see the pixels which are actualyl just
cells of a matrix that are filled with colour! This logo has a
resolution of 240x277 (66,480) pixels.</p>
<div class="float">
<img src="Media_P2_BIOL361%2Fdplyr_zoom.jpg" alt="The dplyr logo with an inset showing the pixels, or the cells of a raster matrix"><div class="figcaption"><strong>The <em>dplyr</em> logo with an inset
showing the pixels, or the cells of a raster matrix</strong></div>
</div>
</div>
<div class="section level4" number="1.1.2">
<h4 id="vector-data-points-and-lines">
<span class="header-section-number">1.1.2</span> Vector data (points
and lines)<a class="anchor" aria-label="anchor" href="#vector-data-points-and-lines"></a>
</h4>
<p>Vector data formats are even simpler, I think than raster data
formats. Once again, you are all familiar with these formats! Probably
the most-common one would be the <em>.pdf</em> format. But others exist
like <em>.svg</em> and <em>.shp</em>. Vector file formats <strong>do not
have pixels</strong> at all, which actually has some benefits. This
means that we can keep zooming and zooming in on a vector file (just as
we did above) and we will never see pixels!</p>
<p>Below, you can see a cutout of a <em>.pdf</em> map file which has
vector data (letters, numbers, points, and lines) as well as raster data
embedded (a raster map of elevation). On the left hand side you can see
that we can zoom into the 18ºS and the lines without any pixels
appearing. But, on the right hand side, you cna see that the lines of
the map remain clear but the pixels of the map begin to appear!</p>
<div class="float">
<img src="Media_P2_BIOL361%2FVector_zoom.png" alt="Two map figures with insets showing the impact of zooming into vector and raster data."><div class="figcaption"><strong>Two map figures with insets showing the
impact of zooming into vector and raster data.</strong></div>
</div>
</div>
</div>
<div class="section level3" number="1.2">
<h3 id="projections">
<span class="header-section-number">1.2</span> Projections<a class="anchor" aria-label="anchor" href="#projections"></a>
</h3>
<p>This is something that is better covered in another topic, but very
briefly… The earth is more or less a sphere, but quite often we want to
represent this sphere on a flat surface (a map). Most of the time, if we
zoom in enough this isn’t really a problem! However, the further out
that we zoom the more and more problematic this is! For that reason we
“<strong>project</strong>” that round map onto a flat surface. These are
“<strong>Projected Coordinate Systems</strong>”.</p>
<div class="float">
<img src="Media_P2_BIOL361%2FInShot_20240506_185350804.jpg" alt="Several projected coordiante systems."><div class="figcaption"><strong>Several projected coordiante
systems.</strong></div>
</div>
<p><a href="https://practicalgeoskills.blogspot.com/2020/04/map-projections-meaning-and-examples.html" class="external-link">Image
from here</a></p>
<p>It’s clear that these projection are visually very… diverse. This
becomes a problem when you’re doing analyses or trying to make maps! In
this prac we will mostly circumvent this issue by using a
“<strong>Geographic [3D] Coordinate System</strong>” like WGS84
(below).</p>
<div class="float">
<img src="Media_P2_BIOL361%2FGlobe_Atlantic.png" alt="WGS84 is a 3D geographic coordinate system that does away with projection issues (untill you want to show your map on a flat page again!)."><div class="figcaption"><strong>WGS84 is a 3D geographic coordinate
system that does away with projection issues (untill you want to show
your map on a flat page again!).</strong></div>
</div>
<p><a href="https://en.wikipedia.org/wiki/World_Geodetic_System" class="external-link">Image
from here</a></p>
</div>
</div>
<div class="section level2" number="2">
<h2 id="script-preparation">
<span class="header-section-number">2</span> Script preparation<a class="anchor" aria-label="anchor" href="#script-preparation"></a>
</h2>
<div class="section level3" number="2.1">
<h3 id="install-and-load-packages">
<span class="header-section-number">2.1</span> Install and load
packages<a class="anchor" aria-label="anchor" href="#install-and-load-packages"></a>
</h3>
<p>Set you working directory again. This can be the same as last week’s
or a new one — up to you!</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Set the RootPath to your folder</span></span>
<span><span class="va">RootPath</span> <span class="op">&lt;-</span> <span class="st">"/Users/jamesdorey/Desktop/Uni/Teaching/BIOL361/Lectures/2025/Github_BIOL361_25/BIOL361_25/DoreyPrac1"</span></span>
<span>  <span class="co"># You can then set this as the project's working directory. </span></span>
<span>  <span class="co"># This is where R will first look to find </span></span>
<span>  <span class="co"># or save data as a default</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">RootPath</span><span class="op">)</span></span></code></pre></div>
<p>These are the <strong>NEW</strong> packages that we will use this
week. If you have lost those from last week, go back and install them as
well. Although, below we will also install some GIS packages.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"geodata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tidyterra"</span><span class="op">)</span></span></code></pre></div>
<p>Load all of the packages from this week and last week into
<strong>R</strong>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">geodata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: terra</span></span></code></pre>
<pre><code><span><span class="co">## terra 1.8.21</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'terra'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:magrittr':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     extract, inset</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dieghernan.github.io/tidyterra/" class="external-link">tidyterra</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'tidyterra'</span></span></code></pre>
<pre><code><span><span class="co">## The following object is masked from 'package:kableExtra':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     group_rows</span></span></code></pre>
<pre><code><span><span class="co">## The following object is masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter</span></span></code></pre>
</div>
<div class="section level3" number="2.2">
<h3 id="gis-in-r-formats-and-packages">
<span class="header-section-number">2.2</span> GIS in <em>R</em>
formats and packages<a class="anchor" aria-label="anchor" href="#gis-in-r-formats-and-packages"></a>
</h3>
<p>Different GIS programs tend to have different file formats.
<strong>ArcMap</strong> is the most cagey (as it’s a proprietary
program) and so has a bunch of annoying proprietary file formats.
<strong>QGIS</strong> is open source and tends to use some simpler
formats (yay!). <strong>R</strong> is more-or-less able to open any of
those formats and read them in (even more yay!). Let’s install the
needed packages and have a very short discussion of their [preferred]
formats.</p>
<blockquote>
<p>“<strong>Raster</strong> data divide space into <em>rectangular grid
cells</em> and they are commonly used to represent spatially continuous
phenomena, such as elevation or the weather. Satellite images also have
this data structure, and in that context grid cells are often referred
to as pixels. In contrast, <strong>vector</strong> spatial data
(<em>points, lines, polygons</em>) are typically used to represent
discrete spatial entities, such as a road, country, or bus stop.”</p>
</blockquote>
<div class="alert alert-info">
<p><strong> Attention:</strong> <br> Annoyingly, the first time that you
use <strong>terra</strong> or <strong>sf</strong> on a new computer you
may need to install some dependencies. Try to install the
<strong>terra</strong> and <strong>sf</strong> packages first but then
come back here if that doesn’t work.</p>
<p><strong> Windows:</strong> <br> On <strong>Windows</strong>, you need
to first install <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools</a> to get
a C++ compiler that <strong>R</strong> can use. You need a recent
version of <strong>Rtools42</strong> (rtools42-5355-5357).</p>
<p><strong> MacOS:</strong> <br> On <strong>macOS</strong>, you can use
<a href="https://www.macports.org/" class="external-link">MacPorts</a> or <a href="https://brew.sh/" class="external-link">Homebrew</a>.</p>
<p>With <strong>MacPorts</strong> you can do</p>
<p><code>sudo port install R-terra</code></p>
<p>With <strong>Homebrew</strong>, you need to first install GDAL:</p>
<p><code>brew install pkg-config</code></p>
<p><code>brew install gdal</code></p>
<p>Followed by (note the additional configuration argument needed for
Homebrew)</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Install terra</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"terra"</span>, type <span class="op">=</span> <span class="st">"source"</span>, configure.args <span class="op">=</span> <span class="st">"--with-proj-lib=$(brew --prefix)/lib/"</span><span class="op">)</span></span>
<span>  <span class="co"># install sf</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sf"</span>, type <span class="op">=</span> <span class="st">"source"</span>, configure.args <span class="op">=</span> <span class="st">"--with-proj-lib=$(brew --prefix)/lib/"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4" number="2.2.1">
<h4 id="terra-formerly-raster">
<span class="header-section-number">2.2.1</span> <em>terra</em>
(formerly <em>raster</em>)<a class="anchor" aria-label="anchor" href="#terra-formerly-raster"></a>
</h4>
<p>The <a href="https://rspatial.github.io/terra/index.html" class="external-link"><strong>terra</strong></a>
package is mostly used to deal with raster data, but has some ability to
work with vector data as well. <em>(It was also formerly called
<strong>raster</strong>.)</em></p>
<p>The <strong>terra</strong> package has two main data types, simply
called <strong>SpatRaster</strong> and <strong>SpatVector</strong>.
<em>(along with some minor types.)</em></p>
</div>
<div class="section level4" number="2.2.2">
<h4 id="sf-formerly-sp">
<span class="header-section-number">2.2.2</span> <em>sf</em>
(formerly <em>sp</em>)<a class="anchor" aria-label="anchor" href="#sf-formerly-sp"></a>
</h4>
<p>The <a href="https://r-spatial.github.io/sf/" class="external-link"><strong>sf</strong></a>, or
<em>simple feature</em> package (formerly <strong>sp</strong>) mainly
works with vector data. That’s to say that by-and-large, it works with
points and lines. However, it does have some abilities to use raster as
well.</p>
<p>By and large, <strong>sf</strong> works with <em>data frames</em> and
<em>tibbles</em> (the latter is what we make with
<code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code>!). Essentially, it stores the spatial
data in an easily human-readable table!</p>
</div>
</div>
</div>
<div class="section level2" number="3">
<h2 id="read-and-plot-data">
<span class="header-section-number">3</span> Read and plot data<a class="anchor" aria-label="anchor" href="#read-and-plot-data"></a>
</h2>
<p>Okay, maybe that’s enough faffing around! There’s more to know about
GIS, but this isn’t the place to learn it all. I just want to give you a
brief overview of what’s possible to do in R so that in your future
careers you’ll be able to do some amazing thigns for conservation
biology! We have talked a lot about these data types, and now I think
it’s past time to get to work with them!</p>
<div class="section level3" number="3.1">
<h3 id="raster">
<span class="header-section-number">3.1</span> Raster<a class="anchor" aria-label="anchor" href="#raster"></a>
</h3>
<p>We can often find raster datasets from government, non-governmental,
and other websites and datasets. You can spend ages looking around
online for the best possible dataset to download and apply towards a
conservation goal. However, <strong>R</strong> also provides packages
that can very easily and quickly read in datasets from the internet!</p>
<p>Below, we will use the <strong>R</strong> package
<strong>geodata</strong> to download a Digital Elevation Model (DEM) os
the entirity of Australia at a 30-second (~1 km) resolution.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AustralianElevations</span> <span class="op">&lt;-</span> <span class="fu">geodata</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/geodata/man/elevation.html" class="external-link">elevation_30s</a></span><span class="op">(</span><span class="st">"Australia"</span>,</span>
<span>                               path <span class="op">=</span> <span class="va">RootPath</span><span class="op">)</span></span>
<span>  <span class="co"># View a summary of the data</span></span>
<span><span class="va">AustralianElevations</span></span></code></pre></div>
<pre><code><span><span class="co">## class       : SpatRaster </span></span>
<span><span class="co">## dimensions  : 4296, 5592, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">## resolution  : 0.008333333, 0.008333333  (x, y)</span></span>
<span><span class="co">## extent      : 112.8, 159.4, -44.9, -9.1  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">## coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">## source      : AUS_elv_msk.tif </span></span>
<span><span class="co">## name        : AUS_elv_msk </span></span>
<span><span class="co">## min value   :         -60 </span></span>
<span><span class="co">## max value   :        2159</span></span></code></pre>
<p>How about that! Within a few seconds we have a <em>spatRaster</em>
showing the elevatino across Australia!</p>
<blockquote>
<p><strong>Q2:</strong> Looking at the summary of
<em>AustralianElevations</em>, (1) what are the dimensions of the file,
(2) what is the coordinate reference system and is it a
<strong>projected</strong> or <strong>geographic</strong> coordinate
system (see “Projections” above), and (3) what are the minimum and
maximum elevational values for this map of Australia?</p>
</blockquote>
<p>Let’s go ahead and have a little peak at what our data looks like now
as well. Quite often you can just run <code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">terra::plot()</a></code> for
your map… however, I don’t always recommend this with bigger GIS files
as they can freeze your computer. In fact, <strong>ggplot2</strong>,
with the help of <strong>tidyterra</strong> does a better job once
again!</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">AusEleMap</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">tidyterra</span><span class="fu">::</span><span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/geom_spatraster.html" class="external-link">geom_spatraster</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">AustralianElevations</span>,</span>
<span>                             <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">AUS_elv_msk</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="co"># Feel free to remove this line (don't leave an open "+" in the previous line) and</span></span>
<span>    <span class="co"># see what happens! "viridis" is one of MANY colour palettes available with ggplot2</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>na.value <span class="op">=</span> <span class="st">"transparent"</span><span class="op">)</span> <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #0000BB;">&lt;SpatRaster&gt;</span> resampled to <span style="color: #00BB00;">500340</span> cells.</span></span></code></pre>
<p><img src="Prac2_BIOL361_files/figure-html/plotRaster-1.png" width="672"></p>
<p>Look, I know that I’m a data nerd and all but seriously? Within a few
lines of code and a few minutes we have a map of Australia that you
could use in a publication or for an analysis? That’s pretty powerful
stuff! <strong>BUT</strong>, an elevation map of Australia isn’t
necessarrily that interesting by itself… maybe we want some species
occurrence data to go with it?</p>
</div>
<div class="section level3" number="3.2">
<h3 id="vector">
<span class="header-section-number">3.2</span> Vector<a class="anchor" aria-label="anchor" href="#vector"></a>
</h3>
<p>So, let’s put some points on our map! Just like last week, we are
going to download some data that I’ve hosted online and then read it
into <strong>R</strong>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/jbdorey/BIOL361_25/main/DoreyPrac2/Australian_Coelioxys.csv"</span>,</span>
<span>                     destfile <span class="op">=</span> <span class="st">"Australian_Coelioxys.csv"</span>,</span>
<span>                     method<span class="op">=</span><span class="st">"curl"</span><span class="op">)</span></span></code></pre></div>
<p>Okay, we have downloaded these data and you can go ahead and look in
your working directory (<em>if you’re not sure type “getwd()” into R to
see where this is</em>). Let’s go ahead and read it into R and we can
also look at it once it’s read in. To do this, we will use the
<strong>tidyverse</strong> package, <strong>readr</strong>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># read in the data using readr</span></span>
<span><span class="va">CoelioxysData</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"Australian_Coelioxys.csv"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">102</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">101</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">## <span style="color: #BB0000;">chr</span> (54): database_id, scientificName, family, subfamily, genus, species, sp...</span></span>
<span><span class="co">## <span style="color: #00BB00;">dbl</span> (11): decimalLatitude, decimalLongitude, startDayOfYear, day, month, yea...</span></span>
<span><span class="co">## <span style="color: #BBBB00;">lgl</span> (36): subgenus, subspecies, infraspecificEpithet, identificationQualifie...</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre>
<p><img src="Media_P2_BIOL361%2FCoelioxys%20(Torridapis)%20weinlandi_JamesDorey_Coelioxys%20sp.%2018JDEC490i%20146p%20MPE%202x.jpg" width="30%" style="float:right; padding:10px"></p>
<blockquote>
<p><strong>Q2:</strong> What type of data did we just download? How many
rows of data are included?</p>
</blockquote>
<p>We just downloaded all of the available and quality data for the
Australian bee genus, <em>Coelioxys</em>! These are really cool cuckoo
bees that lay their eggs in the nests of other bees in the genus
<em>Megachile</em> — just like cuckoo birds!</p>
<p>So, let’s go ahead and have a quick look at those data. Just to show
you how simple point data really are in GIS, we could simply plot the
longitude (x-axis) and latitude (y-axis) and you should be able to make
out the outline of Australia just using those occurrence data! …But see
how it’s kinda squished? Think back to the importance of our projection
systems and how we “see” the world [on a map].</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">CoelioxysData</span><span class="op">$</span><span class="va">decimalLongitude</span>, y <span class="op">=</span> <span class="va">CoelioxysData</span><span class="op">$</span><span class="va">decimalLatitude</span><span class="op">)</span></span></code></pre></div>
<p><img src="Prac2_BIOL361_files/figure-html/simplePointPlot-1.png" width="672"></p>
<p>But really, we want to make a much nicer plot, with these points
overlaid with Australia. So, let’s go ahead and add onto our previous
<strong>ggplot2</strong> object!</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">AusEleMap_points</span> <span class="op">&lt;-</span> <span class="va">AusEleMap</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">CoelioxysData</span>,</span>
<span>                      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">decimalLongitude</span>, y <span class="op">=</span> <span class="va">decimalLatitude</span><span class="op">)</span>,</span>
<span>                      colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Prac2_BIOL361_files/figure-html/ggplotPoints1-1.png" width="672"></p>
<p>See, <strong>ggplot2</strong> is really clever! We could plot just a
regular tibble file! But, to do more complex things, we will want to
turn it into an <strong>sf</strong> <em>simple feature</em> format. This
is actually really easy to do! And then we don’t even need to specify
the x and y, <strong>R</strong> just knows as we use the
<code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">ggplot2::geom_sf()</a></code> function now to plot the
<strong>sf</strong> date format! We could also easily group our data by
species.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CoelioxysPoints</span> <span class="op">&lt;-</span> <span class="va">CoelioxysData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"decimalLongitude"</span>, <span class="st">"decimalLatitude"</span><span class="op">)</span>,</span>
<span>                <span class="co"># we can even match the coordinate reference system as we make our points!</span></span>
<span>               crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">AustralianElevations</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># now make the map using the "sf" data points</span></span>
<span><span class="op">(</span><span class="va">AusEleMap_points</span> <span class="op">&lt;-</span> <span class="va">AusEleMap</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">CoelioxysPoints</span>,</span>
<span>                    <span class="co"># Colour points by species name</span></span>
<span>                   <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">scientificName</span><span class="op">)</span></span>
<span>                      <span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="co"># Add in a simpler theme</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Prac2_BIOL361_files/figure-html/pointTosf-1.png" width="672"></p>
<blockquote>
<p><strong>Q3:</strong> How many species are in the dataset and which is
most-widespread?</p>
</blockquote>
</div>
</div>
<div class="section level2" number="4">
<h2 id="simple-analyses">
<span class="header-section-number">4</span> Simple analyses<a class="anchor" aria-label="anchor" href="#simple-analyses"></a>
</h2>
<p>Cool, so we have some raster data (DEM) and we have some vector data
(points) Waht can we do with this information?! Well, one of the
simplest things</p>
<div class="section level3" number="4.1">
<h3 id="extract-data">
<span class="header-section-number">4.1</span> Extract data<a class="anchor" aria-label="anchor" href="#extract-data"></a>
</h3>
<div class="section level4" number="4.1.1">
<h4 id="vector-1">
<span class="header-section-number">4.1.1</span> Vector<a class="anchor" aria-label="anchor" href="#vector-1"></a>
</h4>
</div>
<div class="section level4" number="4.1.2">
<h4 id="raster-1">
<span class="header-section-number">4.1.2</span> Raster<a class="anchor" aria-label="anchor" href="#raster-1"></a>
</h4>
</div>
</div>
<div class="section level3" number="4.2">
<h3 id="section">
<span class="header-section-number">4.2</span> <a class="anchor" aria-label="anchor" href="#section"></a>
</h3>
</div>
</div>
<div class="section level2" number="5">
<h2 id="whats-coming-next-week">
<span class="header-section-number">5</span> What’s coming next
week?<a class="anchor" aria-label="anchor" href="#whats-coming-next-week"></a>
</h2>
<p>Next week, we will be extending some of what we learnt here in order
to read in GIS data, make some maps, and do some simple analyses.</p>
</div>
<div class="section level2" number="6">
<h2 id="packages-used-today">
<span class="header-section-number">6</span> Packages used
today<a class="anchor" aria-label="anchor" href="#packages-used-today"></a>
</h2>
<p><img src="Media_P2_BIOL361%2Fdplyr.png" width="200"><img src="Media_P2_BIOL361%2Freadr.png" width="200"><img src="Media_P2_BIOL361%2Fmagrittr.png" width="200"><img src="Media_P2_BIOL361%2Fstringr.png" width="200"></p>
<p>Plus the default R packages, <strong>base</strong> and
<strong>utils</strong></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by James B. Dorey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
